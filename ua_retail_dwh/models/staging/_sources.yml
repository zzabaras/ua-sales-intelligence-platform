version: 2

sources:
  - name: retail_raw
    database: ua-retail-analytics
    schema: retail_raw
    tables:
      - name: sales
        columns:
          - name: sale_id
            tests:
              - unique
              - not_null
          - name: product_id
            tests:
              - relationships:
                  to: source('retail_raw', 'products')
                  field: product_id
      - name: products
      - name: stores
      - name: external_factors
      - name: customers
      - name: inventory
      - name: transport_expenses